@using FaasNet.EventMesh.Client.StateMachines.Client
@using FaasNet.EventMesh.UI.Shared.Components

<PropertiesPanel PanelClosed="Close" Title="Properties">
    <!-- Client Identifier -->
    <div class="mb-3">
        <label class="form-label">Client Identifier</label>
        <input type="text" class="form-control" value="@ActiveApplication.ClientId" disabled />
    </div>
    <!-- Vpn -->
    <div class="mb-3">
        <label class="form-label">VPN</label>
        <input type="text" class="form-control" value="@Vpn" disabled />
    </div>
    <!-- Creation datetime -->
    <div class="mb-3">
        <label class="form-label">Creation Datetime</label>
        <input type="text" class="form-control" value="@ActiveApplication.CreateDateTime.GetValueOrDefault().ToLocalTime()" disabled />
    </div>
    <!-- Purpose types -->
    <div class="mb-3">
        <label class="form-label">Purposes</label>
        <div class="purposes">
            @foreach (var purposeType in ActiveApplication.Purposes)
            {
                <span class="badge text-bg-primary purposeType">@Enum.GetName(typeof(ClientPurposeTypes), purposeType)</span>
            }
        </div>
    </div>
</PropertiesPanel>

@code {
    [Parameter]
    public ApplicationViewModel ActiveApplication { get; set; } = null!;
    [Parameter] public EventCallback<bool> ApplicationClosed { get; set; }
    [Parameter] public string Vpn { get; set; } = string.Empty;

    public async void Close()
    {
        await ApplicationClosed.InvokeAsync(true);
    }
}